# üìä –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ LeadBot

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤ –ø–æ –∫–ª—é—á–µ–≤—ã–º –º–µ—Ç—Ä–∏–∫–∞–º –±–æ—Ç–∞.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö** –∑–∞ –ø—Ä–æ—à–ª—É—é –Ω–µ–¥–µ–ª—é
- **–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** –ø–æ –≤—Å–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º —Å–∏—Å—Ç–µ–º—ã
- **–û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram** –≤—Å–µ–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ cron** –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏

## üìà –ú–µ—Ç—Ä–∏–∫–∏

### üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- –ù–æ–≤—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∑–∞ –Ω–µ–¥–µ–ª—é
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- –†–æ—Å—Ç –∞—É–¥–∏—Ç–æ—Ä–∏–∏ (%)
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏

### üéÅ –õ–∏–¥-–º–∞–≥–Ω–∏—Ç—ã
- –í—ã–¥–∞–Ω–æ –ª–∏–¥-–º–∞–≥–Ω–∏—Ç–æ–≤ –∑–∞ –Ω–µ–¥–µ–ª—é
- –ö–æ–Ω–≤–µ—Ä—Å–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º –º–∞–≥–Ω–∏—Ç–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–∞–≥–Ω–∏—Ç–æ–≤

### üî• –ü—Ä–æ–≥—Ä–µ–≤
- –ê–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–≥—Ä–µ–≤—ã
- –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–≥—Ä–µ–≤—ã –∑–∞ –Ω–µ–¥–µ–ª—é
- –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ–≤–∞
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º —Å–æ–æ–±—â–µ–Ω–∏–π
- –ü—Ä–æ—Ü–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ–≤–∞

### üì¢ –†–∞—Å—Å—ã–ª–∫–∏
- –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏ –∑–∞ –Ω–µ–¥–µ–ª—é
- –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –î–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –ü—Ä–æ—Ü–µ–Ω—Ç –¥–æ—Å—Ç–∞–≤–ª—è–µ–º–æ—Å—Ç–∏

### üí∞ –ü—Ä–æ–¥–∞–∂–∏
- –ü—Ä–æ–¥–∞–∂–∏ –∑–∞ –Ω–µ–¥–µ–ª—é
- –î–æ—Ö–æ–¥ –∑–∞ –Ω–µ–¥–µ–ª—é
- –°—Ä–µ–¥–Ω–∏–π —á–µ–∫
- –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –ø—Ä–æ–¥–∞–∂–∏

### üéØ –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- –û–±—â–∞—è –∫–æ–Ω–≤–µ—Ä—Å–∏—è –ª–∏–¥‚Üí–ø–æ–∫—É–ø–∞—Ç–µ–ª—å
- ARPU (–¥–æ—Ö–æ–¥ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- LTV (–∂–∏–∑–Ω–µ–Ω–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å)

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞

```bash
# –¢–µ—Å—Ç–∏—Ä—É–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
python3 scripts/test_weekly_analytics.py
```

### 2. –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫

```bash
# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∞–Ω–∞–ª–∏—Ç–∏–∫—É
python3 scripts/weekly_analytics.py
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏

```bash
# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º cron –∑–∞–¥–∞—á—É (–∫–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –≤ 9:00)
chmod +x scripts/setup_weekly_analytics_cron.sh
./scripts/setup_weekly_analytics_cron.sh
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ cron –∑–∞–¥–∞—á

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–∏—Ö –∑–∞–¥–∞—á
crontab -l

# –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á
crontab -e
```

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç—á–µ—Ç–∞

```
üìä –ï–ñ–ï–ù–ï–î–ï–õ–¨–ù–ê–Ø –ê–ù–ê–õ–ò–¢–ò–ö–ê
üìÖ –ü–µ—Ä–∏–æ–¥: 14.10 - 20.10.2024

üë• –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ò
‚Ä¢ –ù–æ–≤—ã—Ö –∑–∞ –Ω–µ–¥–µ–ª—é: 25
‚Ä¢ –í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 156
‚Ä¢ –ê–∫—Ç–∏–≤–Ω—ã—Ö: 89
‚Ä¢ –†–æ—Å—Ç: 19.1%

üìà –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –¥–Ω—è–º:
‚Ä¢ Monday: 3
‚Ä¢ Tuesday: 5
‚Ä¢ Wednesday: 4
‚Ä¢ Thursday: 6
‚Ä¢ Friday: 2
‚Ä¢ Saturday: 3
‚Ä¢ Sunday: 2

üéÅ –õ–ò–î-–ú–ê–ì–ù–ò–¢–´
‚Ä¢ –í—ã–¥–∞–Ω–æ –∑–∞ –Ω–µ–¥–µ–ª—é: 23
‚Ä¢ –ö–æ–Ω–≤–µ—Ä—Å–∏—è: 92.0%
‚Ä¢ –ê–∫—Ç–∏–≤–Ω—ã—Ö –º–∞–≥–Ω–∏—Ç–æ–≤: 2

üî• –ü–†–û–ì–†–ï–í
‚Ä¢ –ê–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–≥—Ä–µ–≤–∞: 45
‚Ä¢ –ó–∞–≤–µ—Ä—à–µ–Ω–æ –∑–∞ –Ω–µ–¥–µ–ª—é: 12
‚Ä¢ –°–æ–æ–±—â–µ–Ω–∏–π –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: 67
‚Ä¢ –ü—Ä–æ—Ü–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: 26.7%

üì¢ –†–ê–°–°–´–õ–ö–ò
‚Ä¢ –°–æ–∑–¥–∞–Ω–æ —Ä–∞—Å—Å—ã–ª–æ–∫: 3
‚Ä¢ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–π: 156
‚Ä¢ –î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ: 148
‚Ä¢ –î–æ—Å—Ç–∞–≤–ª—è–µ–º–æ—Å—Ç—å: 94.9%

üí∞ –ü–†–û–î–ê–ñ–ò
‚Ä¢ –ü—Ä–æ–¥–∞–∂ –∑–∞ –Ω–µ–¥–µ–ª—é: 3
‚Ä¢ –î–æ—Ö–æ–¥: 2970 ‚ÇΩ
‚Ä¢ –°—Ä–µ–¥–Ω–∏–π —á–µ–∫: 990 ‚ÇΩ
‚Ä¢ –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –ø—Ä–æ–¥–∞–∂–∏: 12.0%

üéØ –ö–õ–Æ–ß–ï–í–´–ï –ú–ï–¢–†–ò–ö–ò
‚Ä¢ –û–±—â–∞—è –∫–æ–Ω–≤–µ—Ä—Å–∏—è –ª–∏–¥‚Üí–ø–æ–∫—É–ø–∞—Ç–µ–ª—å: 12.0%
‚Ä¢ ARPU (–¥–æ—Ö–æ–¥ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è): 19.04 ‚ÇΩ
‚Ä¢ LTV (–∂–∏–∑–Ω–µ–Ω–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å): 57.12 ‚ÇΩ
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –í .env —Ñ–∞–π–ª–µ
BOT_TOKEN=your_bot_token
ADMIN_IDS=123456789,987654321
LOG_LEVEL=INFO
```

### –í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è **–∫–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –≤ 9:00**.

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ cron –∑–∞–¥–∞—á—É:

```bash
# –ö–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –≤ 10:30
30 10 * * 1 cd /path/to/project && python3 scripts/weekly_analytics.py

# –ö–∞–∂–¥–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –≤ 18:00
0 18 * * 0 cd /path/to/project && python3 scripts/weekly_analytics.py
```

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞:**
   ```bash
   echo $BOT_TOKEN
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–æ–≤:**
   ```bash
   grep ADMIN_IDS .env
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   tail -f logs/weekly_analytics.log
   ```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –≤ –æ—Ç—á–µ—Ç–µ

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
   ```bash
   python3 scripts/fix_analytics_and_logs.py
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø—Ä–æ–≥—Ä–µ–≤–∞:**
   ```bash
   python3 scripts/init_warmup.py
   ```

### –ü—Ä–æ–±–ª–µ–º–∞: Cron –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª—ã:**
   ```bash
   chmod +x scripts/weekly_analytics.py
   chmod +x scripts/setup_weekly_analytics_cron.sh
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ Python:**
   ```bash
   which python3
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ cron —Å–µ—Ä–≤–∏—Å:**
   ```bash
   sudo systemctl status cron
   ```

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- **–û—Å–Ω–æ–≤–Ω—ã–µ –ª–æ–≥–∏:** `logs/weekly_analytics.log`
- **–û—à–∏–±–∫–∏ –±–æ—Ç–∞:** `logs/leadbot_errors.log`
- **–û–±—â–∏–µ –ª–æ–≥–∏:** `logs/leadbot.log`

## üéØ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫

1. –î–æ–±–∞–≤—å—Ç–µ –º–µ—Ç–æ–¥ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å–µ—Ä–≤–∏—Å
2. –û–±–Ω–æ–≤–∏—Ç–µ `WeeklyAnalytics` –∫–ª–∞—Å—Å
3. –î–æ–±–∞–≤—å—Ç–µ –º–µ—Ç—Ä–∏–∫—É –≤ `format_analytics_report`

### –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –º–µ—Ç–æ–¥ `format_analytics_report` –≤ `scripts/weekly_analytics.py` –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ –æ—Ç—á–µ—Ç–∞.

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π

–ò–∑–º–µ–Ω–∏—Ç–µ —Å–ø–∏—Å–æ–∫ `ADMIN_IDS` –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –ª–æ–≥–∏–∫—É –≤ `send_analytics_to_admins`.

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ cron
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É
